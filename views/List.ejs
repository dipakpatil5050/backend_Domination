<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List of Notes - Khatabook</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white p-6 rounded-lg shadow-md w-96">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Khatabook</h1>
      <h2 class="text-xl font-semibold text-gray-600 mb-4">All List</h2>
      <ul id="notesList" class="space-y-3"></ul>
      <button
        onclick="fetchNotes()"
        class="mt-4 w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition"
      >
        Create Notes
      </button>
    </div>

    <script>
      async function fetchNotes() {
        const response = await fetch("/notes");
        const data = await response.json();
        const notesList = document.getElementById("notesList");

        notesList.innerHTML = "";
        data.notes.forEach((note) => {
          const listItem = document.createElement("li");
          listItem.className =
            "flex items-center justify-between p-3 bg-blue-500 text-white rounded-lg shadow-md";

          const noteText = document.createElement("span");
          noteText.className = "text-lg font-semibold";
          noteText.textContent = note.replace(".txt", "");

          const viewButton = document.createElement("button");
          viewButton.innerHTML = "➡️";
          viewButton.className = "text-white text-lg";
          viewButton.onclick = () => (window.location.href = `/notes/${note}`);

          const editButton = document.createElement("button");
          editButton.innerHTML = "✏️";
          editButton.className = "ml-2 text-white text-lg";
          editButton.onclick = () =>
            alert("Edit functionality to be implemented");

          const deleteButton = document.createElement("button");
          deleteButton.innerHTML = "🗑️";
          deleteButton.className = "ml-2 text-white text-lg";
          deleteButton.onclick = async () => {
            await fetch(`/notes/${note}`, { method: "DELETE" });
            fetchNotes();
          };

          listItem.appendChild(noteText);
          listItem.appendChild(viewButton);
          listItem.appendChild(editButton);
          listItem.appendChild(deleteButton);
          notesList.appendChild(listItem);
        });
      }

      fetchNotes();
    </script>
  </body>
</html>
